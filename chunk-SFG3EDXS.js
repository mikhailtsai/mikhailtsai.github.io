import{a as ge,b as he,c as fe,d as Te}from"./chunk-JMPHSK5R.js";import{a as Se,b as be,c as Me,d as De,e as we,f as Ae,g as Oe,h as Re}from"./chunk-OGRPJ5DX.js";import{l as de,m as _e,n as Ce,r as Ee,s as ye,w as ke,x as Ie}from"./chunk-BJFDJO6N.js";import{a as me,b as ve}from"./chunk-LTLXX3DI.js";import{a as Fe,b as Ne}from"./chunk-QRVM73QE.js";import{$a as ue,Db as pe,E as ne,F as ae,G as re,O as h,ac as xe,qa as oe,ra as le,ta as ce,ua as se}from"./chunk-7GPB2QO2.js";import{$b as w,Aa as j,Bc as te,D as f,Da as m,Ea as x,Fa as B,Oa as U,Ob as D,Pa as H,Qb as s,Sb as _,Wb as t,Xa as Q,Xb as n,Y as I,Yb as C,Zb as V,_b as Y,ac as W,dc as X,ec as E,ed as F,fc as A,gc as g,hc as z,ia as M,id as ie,jc as q,jd as N,kc as G,kd as b,lc as J,mc as e,nc as O,oc as K,qa as d,r as k,sa as T,sc as R,tc as Z,ua as v,wb as c,wc as ee,xb as u,xc as y,yc as S}from"./chunk-C3KKHK7H.js";function Ve(i,r){if(i&1){let a=W();t(0,"button",2),y(1,"async"),X("click",function(){U(a);let l=E();return H(l.onClick())}),n()}if(i&2){let a=E();_("t-button_expanded",S(1,3,a.expanded$)),s("icon",a.icons.more)}}var Ye=["*",[["tui-tree-item"]],[["tui-tree"]]],We=["*","tui-tree-item","tui-tree"],Xe=(i,r)=>({$implicit:i,template:r});function ze(i,r){i&1&&g(0)}function qe(i,r){if(i&1&&(V(0),e(1),Y()),i&2){let a=r.polymorpheusOutlet;c(),K(" ",a,`
`)}}function Ge(i,r){if(i&1&&(t(0,"tui-expand",4),y(1,"async"),t(2,"div"),g(3,1),g(4,2),n()()),i&2){let a=E();s("expanded",S(1,1,a.expanded$))}}function Je(i,r){i&1&&w(0)}var Ke=(()=>{class i{constructor(a,o,l){this.icons=a,this.context=o,this.controller=l,this.change$=new k,this.expanded$=this.change$.pipe(M(null),f(()=>this.isExpanded),I())}get isExpanded(){return this.context.$implicit.isExpanded}get isExpandable(){return this.context.$implicit.isExpandable&&this.controller!==Le}onClick(){this.controller.toggle(this.context.$implicit)}ngDoCheck(){this.change$.next()}}return i.\u0275fac=function(a){return new(a||i)(u(pe),u(oe),u(d(()=>L)))},i.\u0275cmp=m({type:i,selectors:[["tui-tree-item-content"]],hostVars:2,hostBindings:function(a,o){a&2&&_("_expandable",o.isExpandable)},decls:2,vars:2,consts:[["appearance","flat","shape","rounded","size","xs","tuiIconButton","","type","button","class","t-button",3,"t-button_expanded","icon","click",4,"ngIf"],[3,"ngTemplateOutlet"],["appearance","flat","shape","rounded","size","xs","tuiIconButton","","type","button",1,"t-button",3,"click","icon"]],template:function(a,o){a&1&&(D(0,Ve,2,5,"button",0),w(1,1)),a&2&&(s("ngIf",o.isExpandable),c(),s("ngTemplateOutlet",o.context.template))},dependencies:[me,F,ie,N],styles:["[_nghost-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   tui-tree-item._expandable[_nghost-%COMP%]:not(._expandable), tui-tree-item._expandable   [_nghost-%COMP%]:not(._expandable){padding-left:2rem}.t-button[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;margin-right:.5rem}.t-button_expanded[_ngcontent-%COMP%]{transform:rotate(90deg)}"],changeDetection:0}),i})(),Ze=new le(Ke),Le={isExpanded:ne,toggle:re},Ot=new v("[TUI_TREE_ACCESSOR]"),L=h(Le),$e=new v("[TUI_TREE_NODE]"),Rt=h({}),Ft=new v("[TUI_TREE_START]"),Nt=new v("[TUI_TREE_LOADER]"),et=h(Ze),P=h(-1),tt=[{provide:P,deps:[[new j,P]],useFactory:i=>++i},{provide:$e,useExisting:d(()=>$)}],$=(()=>{class i{constructor(a,o,l,p){this.el=a,this.controller=o,this.level=l,this.content=p,this.nested=ae,this.change$=new k,this.expanded$=this.change$.pipe(M(null),f(()=>this.isExpanded)),this.attached$=this.change$.pipe(f(()=>this.el.nativeElement.isConnected),I())}get isExpandable(){return!!this.nested.length}get isExpanded(){return this.controller.isExpanded(this)}ngDoCheck(){this.checkChanges()}checkChanges(){this.change$.next()}}return i.\u0275fac=function(a){return new(a||i)(u(Q),u(d(()=>L)),u(d(()=>P)),u(d(()=>et)))},i.\u0275cmp=m({type:i,selectors:[["tui-tree-item"]],contentQueries:function(a,o,l){if(a&1&&z(l,$e,4),a&2){let p;q(p=G())&&(o.nested=p)}},hostAttrs:["role","treeitem"],hostVars:2,hostBindings:function(a,o){a&2&&_("_expandable",o.isExpandable)},features:[R(tt)],ngContentSelectors:We,decls:6,vars:9,consts:[["template",""],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["role","group","class","t-children",3,"expanded",4,"ngIf"],[4,"ngIf"],["role","group",1,"t-children",3,"expanded"]],template:function(a,o){if(a&1&&(A(Ye),D(0,ze,1,0,"ng-template",null,0,te)(2,qe,2,1,"ng-container",1)(3,Ge,5,3,"tui-expand",2)(4,Je,1,0,"ng-container",3),y(5,"async")),a&2){let l=J(1);c(2),s("polymorpheusOutlet",o.content)("polymorpheusOutletContext",ee(6,Xe,o,l)),c(),s("ngIf",o.isExpandable),c(),s("ngIf",S(5,4,o.attached$))}},dependencies:[fe,ce,F,N],styles:["[_nghost-%COMP%]{display:block}.t-children[_ngcontent-%COMP%]{position:relative;margin-left:var(--tui-tree-item-indent, 1.5rem)}"],changeDetection:0}),i})();var je=(()=>{class i{constructor(){this.map=new WeakMap,this.fallback=!0}isExpanded(a){var o;return(o=this.map.get(a))!==null&&o!==void 0?o:this.fallback}toggle(a){this.map.set(a,!this.isExpanded(a))}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275dir=B({type:i,selectors:[["","tuiTreeController","",3,"map",""]],inputs:{fallback:[0,"tuiTreeController","fallback"]},exportAs:["tuiTreeController"],features:[R([{provide:L,useExisting:i}])]}),i})();var Be=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=x({type:i}),i.\u0275inj=T({imports:[[b,se,Te,ue,ve]]}),i})();var Ue=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=x({type:i}),i.\u0275inj=T({imports:[[ye]]}),i})();var He=(()=>{let r=class r{constructor(){this.oneFeatureOneLibRoutes=`import { Route } from '@angular/router';

export const appRoutes: Route[] = [
  {
    path: '',
    loadChildren: () =>
      import('@example-app/some-feature').then((module) => module.someFeatureRoutes),
  },
];`,this.oneFeatureOneLibComponent=`import { SomeFeatureWidgetComponent } from '@example-app/some-feature';

@Component({
  selector: 'app-some-another-feature',
  standalone: true,
  imports: [
    SomeFeatureComponent,
  ],
  template: \`<app-some-feature-widget />\`,
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class SomeAnotherFeatureComponent {}`}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=m({type:r,selectors:[["tsaitech-angular-architecture"]],standalone:!0,features:[Z],decls:158,vars:3,consts:[["tuiCardLarge","","tuiSurface","","tuiAppearance","opposite",1,"panel"],["tuiCell",""],["src","/angular.svg#image"],["tuiTitle",""],["tuiSubtitle",""],[1,"chips"],["tuiFade",""],["appearance","info"],["appearance","secondary","tuiFade",""],[1,"text-base"],["appearance","outline","tuiFade",""],["tuiCardLarge","","tuiSurface","","tuiAppearance","flat",1,"tui-space_top-6","text-max-width"],["tuiTitle","s"],[1,"tui-text_body-s"],["tuiLink","","target","_blank","href","https://nx.dev/getting-started/tutorials/angular-monorepo-tutorial"],[1,"tui-text_body-s","tui-space_top-4"],["tuiLink","","target","_blank","href","https://nx.dev/features/enforce-module-boundaries"],["tuiCardLarge","","tuiSurface","elevated","tuiAppearance","flat",1,"tui-space_top-6","text-max-width"],["tuiCardLarge","","tuiAppearance","outline"],[1,"tui-text_body-s",3,"tuiTreeController"],[1,"tui-space_top-4"],[1,"tui-text_body-s","text-base"],["tuiCardLarge","","tuiAppearance","outline",1,"tui-space_bottom-8"],["tuiCardLarge","","tuiAppearance","opposite",1,"tui-space_top-2","tui-space_bottom-8"],["tuiCardLarge","","tuiAppearance","opposite",1,"tui-space_top-2"]],template:function(l,p){l&1&&(t(0,"div",0)(1,"div",1),C(2,"tui-avatar",2),t(3,"div",3),e(4," Angular Architecture 2024 "),t(5,"div",4),e(6,"What modern enterprise-level Angular applications consist of."),n()()(),t(7,"div",5)(8,"tui-chip")(9,"span",6),e(10,"Angular 18+"),n()(),t(11,"tui-chip",7)(12,"span",6),e(13,"NX Monorepo"),n()(),t(14,"tui-chip",8)(15,"span",9),e(16,"Module Federation"),n()(),t(17,"tui-chip",10)(18,"span",9),e(19,"NGRX"),n()()()(),t(20,"div",11)(21,"div",12),e(22," NX Workspace "),t(23,"span",4),e(24," It will help us organize the project and control dependency relationships "),n()(),t(25,"div",13)(26,"div",9),e(27,"To create a new project follow official NX Monorepo tutorial:"),n(),t(28,"a",14),e(29,"Angular Monorepo Tutorial"),n()(),t(30,"div",15)(31,"div",9),e(32,"We are going to use "),t(33,"a",16),e(34,"Enforce Module Boundaries"),n(),e(35," NX feature to control dependencies between modules."),n()()(),t(36,"div",17)(37,"div",12),e(38," File structure "),t(39,"span",4),e(40," The idea is to write isolated modules with controlled dependency reuse "),n()(),t(41,"div",18)(42,"div",19)(43,"tui-tree-item")(44,"b"),e(45,"apps"),n(),t(46,"tui-tree-item")(47,"b"),e(48,"example-app"),n(),t(49,"tui-tree-item")(50,"b"),e(51,"src"),n(),t(52,"tui-tree-item")(53,"b"),e(54,"app.component.ts"),n(),e(55,"\xA0"),t(56,"span",9),e(57,"\u2014 has no logic, is used only for some required integrations in the root component"),n()()()()(),t(58,"tui-tree-item")(59,"b"),e(60,"libs"),n(),t(61,"tui-tree-item")(62,"b"),e(63,"navigation"),n(),e(64,"\xA0"),t(65,"span",9),e(66,"\u2014 if the application has a common navigation logic that is used across all pages"),n()(),t(67,"tui-tree-item",20)(68,"b"),e(69,"common"),n(),e(70,"\xA0"),t(71,"span",9),e(72,"\u2014 directory"),n(),t(73,"tui-tree-item")(74,"b"),e(75,"ui"),n(),e(76,"\xA0"),t(77,"span",9),e(78,"\u2014 storing\xA0"),t(79,"b"),e(80,"small"),n(),e(81,"\xA0and reusable\xA0"),t(82,"b"),e(83,"components"),n()()(),t(84,"tui-tree-item")(85,"b"),e(86,"tools"),n(),e(87,"\xA0"),t(88,"span",9),e(89,"\u2014 storing common services, helpers, consts, models"),n()()(),t(90,"tui-tree-item",20)(91,"b"),e(92,"accounts"),n(),e(93,"\xA0"),t(94,"span",9),e(95,"\u2014 feature directory example split by 3 libraries: view, data and model"),n(),t(96,"tui-tree-item")(97,"b"),e(98,"profile-view"),n(),e(99,"\xA0"),t(100,"span",9),e(101,"\u2014 presentation layer of the feature"),n()(),t(102,"tui-tree-item")(103,"b"),e(104,"profile-data"),n(),e(105,"\xA0"),t(106,"span",9),e(107,"\u2014 data layer of the feature"),n()(),t(108,"tui-tree-item")(109,"b"),e(110,"profile-model"),n(),e(111,"\xA0"),t(112,"span",9),e(113,"\u2014 if profile-data is sharable between another modules we add this library to store DI token and another models"),n()()()()()()(),t(114,"div",17)(115,"div",12),e(116," Feature directory structure "),t(117,"span",4),e(118," Should I always split a feature into 3 separate libraries? No. "),n()(),t(119,"div",21)(120,"h3",12),e(121,"1 feature \u2014 1 library:"),n(),t(122,"p",13),e(123," If the feature itself is small, does not require state storage, has only presentation logic and reuse of other libraries. "),n(),t(124,"div",22)(125,"div",13)(126,"tui-tree-item")(127,"b"),e(128,"libs"),n(),t(129,"tui-tree-item")(130,"b"),e(131,"some-feature"),n(),e(132,"\xA0"),t(133,"span",9),e(134,"\u2014 feature library"),n()()()()(),t(135,"h3",12),e(136,"You can use this type of feature as a route:"),n(),t(137,"div",23)(138,"h4",12),e(139,"app.routes.ts"),n(),t(140,"pre",21),e(141),n()(),t(142,"h3",12),e(143,"You can also use this type of feature as a component in another modules:"),n(),t(144,"div",24)(145,"h4",12),e(146,"some-another-feature.component.ts"),n(),t(147,"pre",21),e(148),n()()()(),t(149,"div",17)(150,"div",12),e(151," Set tags for each app and library "),t(152,"span",4),e(153," We are going to meet NX Enforce Module Boundaries "),n()(),t(154,"div",21)(155,"h3",12),e(156,"To be continued..."),n(),C(157,"p",13),n()()),l&2&&(c(42),s("tuiTreeController",!0),c(99),O(p.oneFeatureOneLibRoutes),c(7),O(p.oneFeatureOneLibComponent))},dependencies:[b,Ie,ke,Ue,Ee,De,Me,Re,Oe,Ae,we,Ne,Fe,be,Se,xe,Ce,_e,de,he,ge,Be,$,je],styles:["[_nghost-%COMP%]{display:block;padding-bottom:10rem}.panel.panel.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;gap:1rem;flex-wrap:wrap}.panel[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;flex-wrap:wrap;max-width:100%}"],changeDetection:0});let i=r;return i})();var Jt=[{path:"",component:He}];export{He as AngularArchitectureComponent,Jt as angularArchitectureRoutes};
